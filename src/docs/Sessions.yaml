paths:
  /api/sessions/register:
    post:
      summary: Registrar un nuevo usuario
      tags:
        - Sessions
      description: Crea un nuevo usuario en el sistema con email y contraseña
      requestBody:
      required: true
      content:
        application/json:
          schema:
          type: object
          required:
            - first_name
            - last_name
            - email
            - password
          properties:
            first_name:
              type: string
              description: Nombre del usuario
              example: Maico
            last_name:
              type: string
              description: Apellido del usuario
              example: Rodriguez
            email:
              type: string
              format: email
              description: Email unico del usuario
              example: maico.rodriguez@ejemplo.com
            password:
              type: string
              format: password
              description: Contraseña del usuario
              example: contraseña123
      responses:
        200:
          description: Usuario registrado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  payload:
                    type: string
                    description: Id del usuario creado
                    example: 123abc456def789ghi
        400:
          description: Datos incompletos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Contraseña incorrecta
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: error
                error:
                  code: USER_INVALID_PASSWORD
                  message: Invalid password
        404:
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: error
                error:
                  code: USER_NOT_FOUND
                  message: User not found

  /api/sessions/current:
    get:
      summary: Obtener usuario actual
      tags:
        - Sessions
      description: Retorna la información del usuario autenticado mediante cookie JWT
      security:
        - cookieAuth: []
      responses:
        200:
          description: Usuario autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  payload:
                    type: object
                    properties:
                      name:
                        type: string
                        example: Juan Pérez
                      role:
                        type: string
                        example: user
                      email:
                        type: string
                        example: juan.perez@example.com
        401:
          description: Token inválido o faltante
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                missing:
                  value:
                    status: error
                    error:
                      code: AUTH_MISSING_TOKEN
                      message: Authentication token is missing
                invalid:
                  value:
                    status: error
                    error:
                      code: AUTH_INVALID_TOKEN
                      message: Invalid authentication token

components:
  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          description: ID único del usuario
          example: 507f1f77bcf86cd799439011
        first_name:
          type: string
          description: Nombre del usuario
          example: Juan
        last_name:
          type: string
          description: Apellido del usuario
          example: Pérez
        email:
          type: string
          format: email
          description: Email del usuario
          example: juan.perez@example.com
        password:
          type: string
          description: Contraseña encriptada
          example: $2b$10$abcdefghijk...
        role:
          type: string
          enum: [user, admin]
          description: Rol del usuario
          example: user
        pets:
          type: array
          items:
            type: object
            properties:
              _id:
                type: string
                example: 507f1f77bcf86cd799439012
          description: Array de IDs de mascotas adoptadas

    Error:
      type: object
      properties:
        status:
          type: string
          example: error
        error:
          type: object
          properties:
            code:
              type: string
              example: USER_NOT_FOUND
            message:
              type: string
              example: User not found
            details:
              type: object
              description: Información adicional sobre el error
                        
